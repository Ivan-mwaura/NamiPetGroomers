import{r as c,j as e,b as v,B as h}from"./index.js";import{C as F}from"./CustomTextField.js";import{C}from"./CustomButton.js";import{b}from"./index.esm.js";import{C as B}from"./CircularProgress.js";const I=()=>{const m=b(),[x,u]=c.useState(!1),[a,g]=c.useState({title:"",author:"",datePosted:"",content:"",image:""}),[i,f]=c.useState(null),[p,j]=c.useState({}),y=async s=>{var r,o;s.preventDefault();const t={};if(a.title||(t.title="Title is required"),a.author||(t.author="Author is required"),a.datePosted||(t.datePosted="Date is required"),a.content||(t.content="Content is required"),j(t),Object.keys(t).length===0){const l=new FormData;l.append("title",a.title),l.append("author",a.author),l.append("datePosted",a.datePosted),l.append("content",a.content),i&&l.append("image",i);try{u(!0),(await v.post("http://localhost:5000/api/v1/blogs",l,{headers:{"Content-Type":"multipart/form-data"}})).status===200&&(h.success("Blog created successfully"),m.push("/blogs"))}catch(d){h.error(((o=(r=d.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to create blog")}finally{u(!1)}}},D=s=>{f(s.target.files[0])},N=s=>{const{name:t,value:r}=s.target;g(o=>({...o,[t]:r}))},n=(s,t,r,o="text",l=!1,d=1)=>e.jsxs("div",{className:"InputGroup",children:[e.jsx("label",{htmlFor:s,children:t}),e.jsx(F,{id:s,name:s,placeholder:r,size:"medium",type:o,multiline:l,rows:d,value:a[s],onChange:N,error:!!p[s],helperText:p[s]&&p[s]})]});return e.jsxs("div",{className:"BlogNew DisplayFlex",children:[e.jsxs("div",{className:"Header DisplayFlex",children:[e.jsx("span",{children:"Dashboard"})," ",e.jsx("i",{className:"fas fa-angle-right"}),e.jsx("span",{children:"Blogs"})," ",e.jsx("i",{className:"fas fa-angle-right"}),e.jsx("span",{children:"Add"})]}),x?e.jsxs("div",{className:"loading-indicator",children:[e.jsx(B,{}),e.jsx("p",{children:"Updating, please wait..."})]}):e.jsxs("form",{onSubmit:y,className:"BlogNewContainer DisplayFlex",children:[e.jsxs("div",{className:"EventsTop DisplayFlex",children:[e.jsx("div",{className:"EventImages DisplayFlex",children:e.jsxs("div",{className:"UploadBox DisplayFlex",children:[e.jsx("input",{type:"file",id:"file",name:"file",style:{display:"none"},onChange:D}),e.jsxs("label",{htmlFor:"file",className:"upload-label",children:[e.jsx("i",{className:"fa fa-cloud-upload-alt"}),e.jsx("p",{children:"Click here or drop file to upload Image"})]}),i&&e.jsx("p",{children:i.name})]})}),e.jsxs("div",{className:"EventDetails DisplayFlex",children:[e.jsx("h2",{children:"Blog Details"}),n("title","Title","e.g Blog Title"),e.jsx("div",{className:"InputGroups DisplayFlex",children:n("author","Author","e.g Author Name")}),e.jsx("div",{className:"InputGroups DisplayFlex",children:n("datePosted","Date Posted","YYYY-MM-DD","date")}),n("content","Content","Enter content here...","text",!0,6)]})]}),e.jsx("div",{className:"BtnGroup DisplayFlex",children:e.jsx(C,{text:"Submit",type:"submit",customStyles:{backgroundColor:"var(--green)"}})})]})]})};export{I as default};
