import{r as d,j as e,a as x,B as l}from"./index-Cbx0FzZ0.js";const f=()=>{const[t,c]=d.useState(!0),[g,p]=d.useState(!1),[s,m]=d.useState({firstName:"",lastName:"",email:"",password:"",role:"user"}),i=n=>{m({...s,[n.target.name]:n.target.value})},u=n=>{m({...s,role:n.target.value})},h=async n=>{n.preventDefault();try{let o=t?"http://localhost:5000/api/v1/signUp":"http://localhost:5000/api/v1/login";s.role==="admin"&&(o="http://localhost:5000/api/v1/adminLogin");const r={email:s.email,password:s.password};t&&(r.firstName=s.firstName,r.lastName=s.lastName,r.role=s.role);const a=await x.post(o,r);console.log("Response Data:",a.data),a.data.msg==="Account created successfully"&&(l.success("Account created successfully. Please log in."),p(!0),c(!1)),a.data.msg==="Login successful"?(console.log("Token received:",a.data),a.data.AdminToken?(l.success("Admin Login successful"),console.log("Admin Token detected, redirecting to /admin"),localStorage.setItem("AdminToken",a.data.AdminToken),setTimeout(()=>{window.location.href="/admin/"},1e3)):a.data.token?(l.success("Login successful"),console.log("User Token detected, redirecting to /"),localStorage.setItem("UserToken",a.data.token),localStorage.setItem("UserEmail",a.data.user.email),setTimeout(()=>{window.location.href="/"},1e3)):console.error("No token found, check backend response")):l.error(a.data.msg)}catch(o){console.error("Error during login:",o),l.error(o.response.data.msg)}};return e.jsx("div",{className:"login-signup-container",children:e.jsxs("div",{className:"login-signup-inner",children:[e.jsx("div",{className:"login-signup-left",children:e.jsxs("div",{className:"form-container",children:[e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab ${t?"active":""}`,onClick:()=>c(!0),children:"Sign Up"}),e.jsx("button",{className:`tab ${t?"":"active"}`,onClick:()=>c(!1),children:"Log In"})]}),g&&!t&&e.jsx("div",{className:"account-created-message",children:e.jsx("p",{children:"Your account has been created. Please log in with your new credentials."})}),e.jsxs("form",{className:"form",onSubmit:h,children:[t?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Sign Up to InsideBox"}),e.jsx("input",{type:"text",name:"firstName",placeholder:"First Name",value:s.firstName,onChange:i,required:!0}),e.jsx("input",{type:"text",name:"lastName",placeholder:"Last Name",value:s.lastName,onChange:i,required:!0})]}):e.jsx(e.Fragment,{children:e.jsx("h2",{children:"Login"})}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:s.email,onChange:i,required:!0}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:s.password,onChange:i,required:!0}),!t&&e.jsxs("div",{className:"login-options",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"role",value:"user",checked:s.role==="user",onChange:u})," User"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"role",value:"admin",checked:s.role==="admin",onChange:u})," Admin"]})]}),e.jsx("button",{type:"submit",children:t?"Sign Up":"Log In"})]}),e.jsxs("div",{className:"social-login",children:[e.jsx("p",{children:"or sign up with"}),e.jsxs("div",{className:"social-buttons",children:[e.jsx("button",{className:"facebook-btn",children:"Facebook"}),e.jsx("button",{className:"google-btn",children:"Google"}),e.jsx("button",{className:"apple-btn",children:"Apple"})]})]})]})}),e.jsx("div",{className:"login-signup-right"})]})})};export{f as default};
