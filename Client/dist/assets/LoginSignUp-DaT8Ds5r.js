import{r as c,j as e,a as f,B as r}from"./index-ChWhmcaZ.js";const j=()=>{const[n,d]=c.useState(!0),[g,p]=c.useState(!1),[a,m]=c.useState({firstName:"",lastName:"",email:"",password:"",role:"user"});c.useEffect(()=>{localStorage.getItem("UserToken")?window.location.href="/":localStorage.getItem("AdminToken")&&(window.location.href="/admin")},[]);const i=t=>{m({...a,[t.target.name]:t.target.value})},u=t=>{m({...a,role:t.target.value})},h=async t=>{t.preventDefault();try{let o=n?"/api/v1/signUp":"/api/v1/login";a.role==="admin"&&(o="/api/v1/adminLogin");const l={email:a.email,password:a.password};n&&(l.firstName=a.firstName,l.lastName=a.lastName,l.role=a.role);const s=await f.post(o,l);console.log("Response Data:",s.data),s.data.msg==="Account created successfully"&&(r.success("Account created successfully. Please log in."),p(!0),d(!1)),s.data.msg==="Login successful"?(console.log("Token received:",s.data),s.data.AdminToken?(r.success("Admin Login successful"),console.log("Admin Token detected, redirecting to /admin"),localStorage.setItem("AdminToken",s.data.AdminToken),setTimeout(()=>{window.location.href="/admin/"},1e3)):s.data.token?(r.success("Login successful"),console.log("User Token detected, redirecting to /"),localStorage.setItem("UserToken",s.data.token),localStorage.setItem("UserEmail",s.data.user.email),setTimeout(()=>{window.location.href="/"},1e3)):console.error("No token found, check backend response")):r.error(s.data.msg)}catch(o){console.error("Error during login:",o),r.error(o.response.data.msg)}};return e.jsx("div",{className:"login-signup-container",children:e.jsxs("div",{className:"login-signup-inner",children:[e.jsx("div",{className:"login-signup-left",children:e.jsxs("div",{className:"form-container",children:[e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab ${n?"active":""}`,onClick:()=>d(!0),children:"Sign Up"}),e.jsx("button",{className:`tab ${n?"":"active"}`,onClick:()=>d(!1),children:"Log In"})]}),g&&!n&&e.jsx("div",{className:"account-created-message",children:e.jsx("p",{children:"Your account has been created. Please log in with your new credentials."})}),e.jsxs("form",{className:"form",onSubmit:h,children:[n?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Sign Up to InsideBox"}),e.jsx("input",{type:"text",name:"firstName",placeholder:"First Name",value:a.firstName,onChange:i,required:!0}),e.jsx("input",{type:"text",name:"lastName",placeholder:"Last Name",value:a.lastName,onChange:i,required:!0})]}):e.jsx(e.Fragment,{children:e.jsx("h2",{children:"Login"})}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",value:a.email,onChange:i,required:!0}),e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:a.password,onChange:i,required:!0}),!n&&e.jsxs("div",{className:"login-options",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"role",value:"user",checked:a.role==="user",onChange:u})," User"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"role",value:"admin",checked:a.role==="admin",onChange:u})," Admin"]})]}),e.jsx("button",{type:"submit",children:n?"Sign Up":"Log In"})]}),e.jsx("div",{className:"explore-more",children:e.jsxs("p",{children:["Want to learn more about us? Check out our ",e.jsx("a",{href:"/",children:"Home page"})," page!"]})})]})}),e.jsx("div",{className:"login-signup-right"})]})})};export{j as default};
